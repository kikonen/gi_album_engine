<div class="container-fluid">
  <ui-view></uiview>
</div>

<script type='text/ng-template' id='templates/root'>
  <ui-view></uiview>
</script>

<script type='text/ng-template' id='templates/index'>
  <div>
    <table st-table="displayedElements" st-safe-src="index.elements" class="table table-striped gi-table-fixed">
      <thead>
        <tr>
	  <td colspan="2" class="text-center">
	    <div st-pagination=""
                 st-items-by-page="20"
                 st-displayed-pages="10"
                 st-template="templates/pagination">
            </div>
	  </td>
        </tr>
        <tr>
	  <th colspan="2">
            <input st-search="" class="form-control" placeholder="search ..." type="text"/>
          </th>
        </tr>
      </thead>

      <tr ng-if="index.dir.length > 1">
        <td>Go Up</td>
        <td>
          <a ng-click="index.goUp(index.dir)">
            <%= image_tag 'gi_album/material/keyboard-backspace.svg', height: 100 %>
          </a>
        </td>
      </tr>

      <tr ng-repeat="elem in displayedElements">
        <td >{{ elem.name }}</td>
        <td ng-if="elem.photo">
          <a ng-href="http://kari.dy.fi/album/{{elem.path}}" target="_blank">
            <img ng-src="thumb/{{elem.path}}" height="100"/>
            <!--          <%= image_tag 'gi_album/spinner.svg', height: 100, width: 100 %> -->
          </a>
        </td>
        <td ng-if="!elem.photo">
          <a ng-click="index.goDir(elem.path)">
            <%= image_tag 'gi_album/material/folder.svg', height: 100 %>
          </a>
        </td>
      </tr>

      <tfoot>
        <tr>
	  <td colspan="2" class="text-center">
	    <div st-pagination=""
                 st-items-by-page="20"
                 st-displayed-pages="10"
                 st-template="templates/pagination">
            </div>
	  </td>
        </tr>
      </tfoot>
    </table>
  </div>
</script>

<script type='text/ng-template' id='templates/pagination'>
<div ng-if="pages.length >= 2">
  <div class="btn-group">
    <button class="btn btn-default" ng-click="selectPage(1)">First</button>
    <button class="btn btn-default" ng-click="selectPage(currentPage - 1)">&lt;</button>
    <button
        class="btn gi-btn-pagination"
        ng-class="{'btn-primary': currentPage === page, 'btn-default': currentPage !== page}"
        ng-repeat="page in pages"
        ng-click="selectPage(page)">
      {{page}}
    </button>
    <button class="btn btn-default" ng-click="selectPage(currentPage + 1)">&gt;</button>
    <button class="btn btn-default" ng-click="selectPage(numPages)">Last</button>
  </ul>
</div>
</script>
